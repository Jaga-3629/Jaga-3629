class Node:
    def __init__(self,data):
        self.data=data
        self.next=None
        self.prev=None
class linkedlist:
    def __init__(self):
        self.head=None
        self.tail=None
    def push(self,data):
        fl=0
        if(self.head==None):
            nn=Node(data)
            self.head=self.tail=nn
            self.head.next=self.tail
            self.head.prev=self.tail
        else:
            nn=Node(data)
            self.tail.next = nn
            nn.prev = self.tail    
            self.tail = nn
            self.head.prev=self.tail
            self.tail.next = self.head
    def display(self):
        tmp=self.head
        co=0
        if(self.head is None):
            print("The list is empty")
        else:
            print(tmp.data)
            while(tmp.next!=self.head):
                tmp=tmp.next
                print(tmp.data)
def delatend(ll):
    if(ll.head.next==ll.head):
        ll.head=ll.tail=None
        tmp=None
    else:
        ll.tail=ll.tail.prev
        ll.tail.next=ll.head
        ll.head.prev=ll.tail
        tmp=None
def getpos(ll,mlt):#to get the position of a node
    tmp=ll.head
    co=1
    if(tmp.next==ll.head):
        return co
    else:
        while(tmp.next!=ll.head):
            if(tmp==mlt):
                return co
            if(tmp==ll.tail.prev):
                return co+1
            tmp=tmp.next
            co+=1
def length(ll):
    tmp=ll.head
    co=1
    while(tmp.next!=ll.head):
        co+=1
        tmp=tmp.next
    return co
def delatbeg(ll):
    if(ll.head.next==ll.head):
        ll.head=ll.tail=None
        tmp=None
    else:
        ll.head=ll.head.next
        ll.head.prev=ll.tail
        ll.tail.next=ll.head
        tmp=None
def delatmid(ll):
    kl=ll
    lo=ll.prev
    ps=ll.next
    lo.next=ll.next
    ps.prev=lo
    kl=None
def delete(ll):
    tmp=ll.head
    if(tmp is None):
        print("The list is empty")
    else:
        while(tmp.next!=ll.head):
            ty=getpos(ll,tmp)
            if(ty==1):
                if(tmp.data%2!=0):
                    delatbeg(ll)
            elif(ty==length(ll)):
                if(tmp.data%2!=0):
                    delatend(ll)
            else:
                if(tmp.data%2!=0):
                    delatmid(tmp)
            tmp=tmp.next
        if(tmp.data%2!=0):
            delatend(ll)
ll=linkedlist()
ll.push(11)
ll.push(13)
ll.push(15)
ll.push(3)
ll.push(5)
ll.push(2)
delete(ll)
ll.display()
